storage:
    dbPath: {{ mongo_db_dir }}
    engine: wiredTiger
    wiredTiger:
        indexConfig:
            prefixCompression: true
        engineConfig:
{% if mongo_wt_cache_gb %}
            cacheSizeGB: {{ mongo_wt_cache_gb }}
{% endif %}
            directoryForIndexes: {{ mongo_wt_directory_for_indexes | lower }}
            statisticsLogDelaySecs: 0
        collectionConfig:
            blockCompressor: snappy
systemLog:
    destination: file
    path: {{ mongo_log_path }}
    logAppend: {{ mongo_log_append | lower }}
    logRotate: {{ mongo_log_rotate }}
    verbosity: {{ mongo_log_verbosity }}
    timeStampFormat: iso8601-utc
processManagement:
    fork: {{ mongo_fork_process | lower }}
    pidFilePath: {{ mongo_pid_file }}
net:
    bindIp: 0.0.0.0
    port: {{ mongo_port }}
{% if mongo_ssl_enabled | default(False) %}
    ssl:
        mode: {{ mongo_ssl_mode }}
        PEMKeyFile: {{ mongo_ssl_pem_key_file }}
        CAFile: {{ mongo_ssl_ca_file }}
        allowInvalidCertificates: {{ mongo_ssl_allow_invalid_certificates | lower }}
        allowInvalidHostnames: {{ mongo_ssl_allow_invalid_hostnames | lower }}
{% endif %}
security:
    authorization: {{ mongo_authorization }}
operationProfiling:
    slowOpThresholdMs: {{ mongo_slow_op_threshold_ms }}
    mode: {{ mongo_operation_profiling_mode }}
{% if sharding | default(False) %}
sharding:
    clusterRole: {{ mongo_cluster_role }}
{% endif %}

{% if mongo_init_replica_set | default(False) %}
replication:
    replSetName: {{ mongo_replica_set_name }}
{% endif %}
